{% assign resource = page.url | split: "/" | last %}
{% assign base_dir = page.url | remove: resource %}

<title>{{ site.title }} - {{ page.title }}</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta charset="utf-8" />

<!-- Favicons: https://github.com/fuzzywalrus/Photoshop-FavIcon-Action -->
<!-- Generics -->
<link rel="icon" href="/assets/images/favicon-16.png" sizes="16x16">
<link rel="icon" href="/assets/images/favicon-32.png" sizes="32x32">
<link rel="icon" href="/assets/images/favicon-128.png" sizes="128x128">
<link rel="icon" href="/assets/images/favicon-192.png" sizes="192x192">
<!-- Android -->
<link rel="shortcut icon" href="/assets/images/favicon-196.png" sizes="196x196">
<!-- iOS -->
<link rel="apple-touch-icon" href="/assets/images/favicon-152.png" sizes="152x152">
<link rel="apple-touch-icon" href="/assets/images/favicon-167.png" sizes="167x167">
<link rel="apple-touch-icon" href="/assets/images/favicon-180.png" sizes="180x180">
<!-- End Favicons -->

<!-- Open Graph tags: https://ogp.me/ -->
<meta property="og:title" content="{{ site.title }} - {{ page.title }}" />
<meta property="og:description" content="{{ page.description | default: site.description }}" />
<meta property="og:type" content="website" />
<meta property="og:url" content="{{ page.url | absolute_url }}" />
<meta property="og:image" content="{{ page.og.image | prepend: base_dir | absolute_url | default: site.og.image | absolute_url }}" />
<meta property="og:image:secure_url" content="{{ page.og.image | prepend: base_dir | absolute_url | default: site.og.image | absolute_url }}" />
<meta property="og:image:type" content="{{ page.og.image_mimetype | default: site.og.image_mimetype }}" />
<meta property="og:image:width" content="{{ page.og.image_width  | default: site.og.image_width }}" />
<meta property="og:image:height" content="{{ page.og.image_height | default: site.og.image_height }}" />
<meta property="og:image:alt" content="{{ page.og.image_alt | default: site.og.image_alt }}" />
<!-- End Open Graph tags -->

<!-- Twitter Cards: https://developer.twitter.com/en/docs/tweets/optimize-with-cards/overview/summary-card-with-large-image -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="{{ site.twitter.username }}">
<meta name="twitter:title" content="{{ site.title }} - {{ page.title }}">
<meta name="twitter:description" content="{{ page.description | default: site.description }}" />
<meta name="twitter:image" content="{{ page.og.image | prepend: base_dir | absolute_url | default: site.og.image | absolute_url }}">

{% if site.google_analytics -%}
{% include google_analytics.html %}
{% endif -%}

<!-- Snipcart -->
<link rel="preconnect" href="https://app.snipcart.com">
<link rel="preconnect" href="https://cdn.snipcart.com">
<link rel="stylesheet" href="https://cdn.snipcart.com/themes/v3.0.18/default/snipcart.css" />

<!-- My CSS -->
<link rel="stylesheet" href="/assets/css/main.css" />

<!-- Image Carousel Script -->
<script type="text/javascript">

var currentImage = 0;

function bounds_check(n)
{
	var numImages = document.getElementsByClassName("images").length;
	if (n >= numImages)
	{
		n = 0;
	}
	if (n < 0)
	{
		n = numImages - 1;
	}
	return n;
}

function scroll_to_image(n)
{
	var cluster = document.getElementById("thumb_clicker");
	var thumbs = document.getElementsByClassName("thumbs");

	// Scroll to the correct image
	var imageIndex = bounds_check(n);
	var currentWidth = thumbs[imageIndex].clientWidth;
	var currentOffset = thumbs[imageIndex].offsetLeft;
	var containerOffset = cluster.offsetLeft;
	var containerWidth = cluster.clientWidth;
	cluster.scrollLeft = currentOffset - containerOffset - (containerWidth / 2) + (currentWidth / 2);
}

function change_image(n)
{
	var imageIndex = bounds_check(n);
	var cluster = document.getElementById("thumb_clicker");
	var thumbs = document.getElementsByClassName("thumbs");
	var images = document.getElementsByClassName("images");
	var numImages = images.length;

	// Deactivate images and thumbnails. Highlight correct thumbnail.
	for (var i = 0; i < numImages; i++)
	{
		thumbs[i].className = "thumbs inactive";
		images[i].className = "images hidden";
	}
	thumbs[imageIndex].className = "thumbs active";
	images[imageIndex].className = "images";

	// Set the new current image
	currentImage = imageIndex;
}

function rotate_image(n)
{
	change_image(currentImage + n);
	scroll_to_image(currentImage);
}
</script>
